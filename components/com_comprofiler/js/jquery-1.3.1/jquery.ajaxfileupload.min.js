jQuery.extend({createUploadIframe:function(d,b){var a="jUploadFrame"+d;var c;if(window.ActiveXObject){c=document.createElement('<iframe id="'+a+'" name="'+a+'" />');if(typeof b=="boolean"){c.src="javascript:false"}else{if(typeof b=="string"){c.src=b}}}else{c=document.createElement("iframe");c.id=a;c.name=a}c.style.position="absolute";c.style.top="-1000px";c.style.left="-1000px";document.body.appendChild(c);return c},createUploadForm:function(g,b){var e="jUploadForm"+g;var a="jUploadFile"+g;var d=$('<form  action="" method="POST" name="'+e+'" id="'+e+'" enctype="multipart/form-data"></form>');var c=$("#"+b);var f=$(c).clone();$(c).attr("id",a);$(c).before(f);$(c).appendTo(d);$(d).css("position","absolute");$(d).css("top","-1200px");$(d).css("left","-1200px");$(d).appendTo("body");return d},ajaxFileUpload:function(l){l=jQuery.extend({},jQuery.ajaxSettings,l);var b=new Date().getTime();var c=jQuery.createUploadForm(b,l.fileElementId);var j=jQuery.createUploadIframe(b,l.secureuri);var i="jUploadFrame"+b;var k="jUploadForm"+b;if(l.global&&!jQuery.active++){jQuery.event.trigger("ajaxStart")}var d=false;var g={};if(l.global){jQuery.event.trigger("ajaxSend",[g,l])}var f=function(m){var q=document.getElementById(i);try{if(q.contentWindow){g.responseText=q.contentWindow.document.body?q.contentWindow.document.body.innerHTML:null;g.responseXML=q.contentWindow.document.XMLDocument?q.contentWindow.document.XMLDocument:q.contentWindow.document}else{if(q.contentDocument){g.responseText=q.contentDocument.document.body?q.contentDocument.document.body.innerHTML:null;g.responseXML=q.contentDocument.document.XMLDocument?q.contentDocument.document.XMLDocument:q.contentDocument.document}}}catch(p){jQuery.handleError(l,g,null,p)}if(g||m=="timeout"){d=true;var n;try{n=m!="timeout"?"success":"error";if(n!="error"){var o=jQuery.uploadHttpData(g,l.dataType);if(l.success){l.success(o,n)}if(l.global){jQuery.event.trigger("ajaxSuccess",[g,l])}}else{jQuery.handleError(l,g,n)}}catch(p){n="error";jQuery.handleError(l,g,n,p)}if(l.global){jQuery.event.trigger("ajaxComplete",[g,l])}if(l.global&&!--jQuery.active){jQuery.event.trigger("ajaxStop")}if(l.complete){l.complete(g,n)}jQuery(q).unbind();setTimeout(function(){try{$(q).remove();$(c).remove()}catch(r){jQuery.handleError(l,g,null,r)}},100);g=null}};if(l.timeout>0){setTimeout(function(){if(!d){f("timeout")}},l.timeout)}try{var a=$("#"+k);$(a).attr("action",l.url);$(a).attr("method","POST");$(a).attr("target",i);if(a.encoding){a.encoding="multipart/form-data"}else{a.enctype="multipart/form-data"}$(a).submit()}catch(h){jQuery.handleError(l,g,null,h)}if(window.attachEvent){document.getElementById(i).attachEvent("onload",f)}else{document.getElementById(i).addEventListener("load",f,false)}return{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;data=type=="xml"||data?r.responseXML:r.responseText;if(type=="script"){jQuery.globalEval(data)}if(type=="json"){eval("data = "+data)}if(type=="html"){jQuery("<div>").html(data).evalScripts()}return data}});